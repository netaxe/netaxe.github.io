import{_ as t,n as d,p as i,q as l,s as n,R as e,t as a,$ as o}from"./framework-71306714.js";const c={},r=n("h2",{id:"install-netaxe-on-docker",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#install-netaxe-on-docker","aria-hidden":"true"},"#"),e(" Install Netaxe on Docker")],-1),p=n("p",null,"To install Netaxe using Docker, you need to install Docker locally in advance.",-1),u=n("h2",{id:"for-the-installation-of-docker-please-refer-to-the-official-documentation",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#for-the-installation-of-docker-please-refer-to-the-official-documentation","aria-hidden":"true"},"#"),e(" For the installation of Docker, please refer to the official documentation:：")],-1),v={href:"https://docs.docker.com/install/linux/docker-ce/ubuntu",target:"_blank",rel:"noopener noreferrer"},m={href:"https://docs.docker.com/install/linux/docker-ce/debian",target:"_blank",rel:"noopener noreferrer"},b={href:"https://docs.docker.com/install/linux/docker-ce/centos",target:"_blank",rel:"noopener noreferrer"},h=o(`<h3 id="install-docker-and-docker-compose" tabindex="-1"><a class="header-anchor" href="#install-docker-and-docker-compose" aria-hidden="true">#</a> Install <code>docker</code> And <code>docker-compose</code></h3><details><summary> CentOS （<a href="https://docs.docker.com/engine/install/centos/">查看官方教程</a>） </summary><ol><li><p>Uninstall Old Version <code>docker</code> 或 <code>docker-engine</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\\</span>
docker-client <span class="token punctuation">\\</span>
docker-client-latest <span class="token punctuation">\\</span>
docker-common <span class="token punctuation">\\</span>
docker-latest <span class="token punctuation">\\</span>
docker-latest-logrotate <span class="token punctuation">\\</span>
docker-logrotate <span class="token punctuation">\\</span>
docker-engine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Set Repo</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Choose one of the following two, the second is domestic source</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\\</span>
 --add-repo <span class="token punctuation">\\</span>
 https://download.docker.com/linux/centos/docker-ce.repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Install <code>docker</code> engine</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> docker-ce <span class="token punctuation">\\</span>
docker-ce-cli <span class="token punctuation">\\</span>
containerd.io <span class="token punctuation">\\</span>
docker-buildx-plugin <span class="token punctuation">\\</span>
docker-compose-plugin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Run <code>docker</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol></details><details><summary> Ubuntu （<a href="https://docs.docker.com/engine/install/ubuntu/">查看官方教程</a>） </summary><ol><li><p>Uninstall Old Version <code>docker</code> 或 <code>docker-engine</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> remove <span class="token function">docker</span> docker-engine docker.io containerd runc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Set Repo</p><ol><li><p>Update &#39;apt&#39; package index and install dependencies</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token punctuation">\\</span>
ca-certificates <span class="token punctuation">\\</span>
<span class="token function">curl</span> <span class="token punctuation">\\</span>
gnupg <span class="token punctuation">\\</span>
lsb-release
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Add Docker official GPG key</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-m</span> 0755 <span class="token parameter variable">-p</span> /etc/apt/keyrings
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token parameter variable">-o</span> /etc/apt/keyrings/docker.gpg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Set Repo</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token punctuation">\\</span>
<span class="token string">&quot;deb [arch=<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\
<span class="token variable"><span class="token variable">$(</span>lsb_release <span class="token parameter variable">-cs</span><span class="token variable">)</span></span> stable&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><p>Install <code>docker</code> engine</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>Receive a GPG error while running the &#39;apt-get&#39; update?</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chmod</span> a+r /etc/apt/keyrings/docker.gpg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token function">sudo</span> <span class="token function">apt-get</span> update
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce <span class="token punctuation">\\</span>
docker-ce-cli <span class="token punctuation">\\</span>
containerd.io <span class="token punctuation">\\</span>
docker-buildx-plugin <span class="token punctuation">\\</span>
docker-compose-plugin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></details><h2 id="deploy-netaxe" tabindex="-1"><a class="header-anchor" href="#deploy-netaxe" aria-hidden="true">#</a> Deploy Netaxe</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>
Disable the firewall:

systemctl stop firewalld.service

systemctl disable firewalld.service 

You need to close selinux

<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;s/SELINUX=enforcing/SELINUX=disabled/g&quot;</span> /etc/selinux/config

Check whether the modification is successful

<span class="token function">grep</span> SELINUX /etc/selinux/config

Then restart the system

<span class="token function">reboot</span>
<span class="token function">git</span> clone https://gitee.com/iflytek/NetAxe.git

<span class="token builtin class-name">cd</span> NetAxe/install-compose/

<span class="token function">sh</span> init.sh   <span class="token operator">&amp;&amp;</span> <span class="token function">sh</span>  deploy.sh  <span class="token operator">&amp;&amp;</span> <span class="token function">sh</span> init_apisix.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The network adapter IP corresponding to the default route of your server is automatically found as the IP to listen to after the service is deployed</p><p>If your server involves IP mapping or nginx proxy, you need to change it</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sh</span> init.sh <span class="token number">1.1</span>.1.1   <span class="token operator">&amp;&amp;</span> <span class="token function">sh</span>  deploy.sh  <span class="token operator">&amp;&amp;</span> <span class="token function">sh</span> init_apisix.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>1.1.1.1 is the IP on which you want the service to end up running</p><h2 id="application-port-planning-table" tabindex="-1"><a class="header-anchor" href="#application-port-planning-table" aria-hidden="true">#</a> Application port planning table</h2><table><thead><tr><th>应用</th><th>前端 web</th><th>后端 controller</th><th>别名</th></tr></thead><tbody><tr><td>微前端主应用</td><td>9980</td><td>-</td><td>-</td></tr><tr><td>基础平台</td><td>32200</td><td>31100</td><td>base</td></tr><tr><td>消息网关</td><td>32201</td><td>31101</td><td>msg-gateway</td></tr><tr><td>告警中心</td><td>32202</td><td>31102</td><td>alert</td></tr><tr><td>IPAM</td><td>32203</td><td>31103</td><td>ipam</td></tr><tr><td>RBAC</td><td>32204</td><td>31104</td><td>rbac</td></tr><tr><td>南向驱动</td><td>32205</td><td>31105</td><td>south-driver</td></tr><tr><td>监控中心</td><td>32206</td><td>31106</td><td>neteye</td></tr><tr><td>可视化指标</td><td>32207</td><td>31107</td><td>metric</td></tr><tr><td>DCN 控制器</td><td>32208</td><td>31108</td><td>dcn</td></tr><tr><td>DCS 控制器</td><td>32208</td><td>31108</td><td>dcs</td></tr><tr><td>工作流引擎</td><td>32209</td><td>31109</td><td>work-flow</td></tr><tr><td>资源平台</td><td>32210</td><td>31110</td><td>cmdb</td></tr><tr><td>私有平台</td><td>32211</td><td>31111</td><td>private</td></tr></tbody></table><h2 id="底层工具端口规划表" tabindex="-1"><a class="header-anchor" href="#底层工具端口规划表" aria-hidden="true">#</a> 底层工具端口规划表</h2><table><thead><tr><th>应用</th><th>端口</th></tr></thead><tbody><tr><td>apisix-dashboard</td><td>39000</td></tr><tr><td>apisix</td><td>9080/9091/9092/9443</td></tr><tr><td>etcd</td><td>2379</td></tr><tr><td>mongo</td><td>37018</td></tr><tr><td>mongo-express</td><td>37017</td></tr><tr><td>mysql</td><td>36306</td></tr><tr><td>redis</td><td>36379</td></tr><tr><td>rabbitmq</td><td>31672/32672</td></tr><tr><td>nacos</td><td>8848</td></tr><tr><td>pushgateway</td><td>39091</td></tr><tr><td>prometheus</td><td>39090</td></tr></tbody></table>`,13);function k(g,f){const s=d("ExternalLinkIcon");return i(),l("div",null,[r,p,u,n("ul",null,[n("li",null,[n("a",v,[e("Ubuntu"),a(s)])]),n("li",null,[n("a",m,[e("Debian"),a(s)])]),n("li",null,[n("a",b,[e("CentOS"),a(s)])])]),h])}const y=t(c,[["render",k],["__file","start.html.vue"]]);export{y as default};
